# Журнал технического долга

#### Git
Управляемое клонирование подмодулей: Подключаю https://github.com/bulletphysics/bullet3.git. Репозиторий большой, лучше бы выкачивать только необходимое, с boost тоже самое. 

#### CMAKE. 
Время сборки проекта. CMAKE долго собирает проект, нужно сократить время. Сделать подсчёт времени сборки. Суммировать время затраченое на сборку в течении рабочего дня.
Удалил Camera.cpp из проекта, cmake и сборки - gdb снова не захотел запускать отладку. Что-то не так со сборкой.
CMake configuration тоже очень долго длиться.

#### Pimpl
Изучить идиому, в каких контекстах эффективно вписывается, хорошие практики, подходит ли сюда. Тоже самое с альтернативными подходами разделения абстракций от реализации.
Пройтись по всем Pimpl. Сделать правильное коструирование и присваивание.

#### Backends
Переделать маршрут мышки до интересантов после введения backends.
mainWindowAbstractWrapper - это костыль
SDL_ButtonsRemap - костыль

#### Scene
Коструирование и присваивание объектов Scene сейчас неправильное.
Не делать каждую подсистему EventListener, придумать что-то поэлегантнее.
Scene::getSubsystem сделан на RTTI - поискать способ побыстрее.
Scene потихоньку становится супер классом. Нужно будет рефакторить после введения backends.

##### Subsystems
Ввести состояние для RaycastSubsystem - должнали она проверять объект под луч на каждом tick. RaycastSubsystem можно порефакторить - сделать метод GetObjectUnderRay.
mainWindowAbstractWrapper - это костыль

#### Initialization
Чтобы что-то могло подписаться на события, необходима EventProcessingSubsystem в консистентном состоянии. RAII туит может не стработать. Но пока буду выстраивать посследоватьельность конструирования подсистем в нужном порядке в Scene::prepareSceneSubsystems.
Необходимости продумать как в коде внедрять default состояния без magic numbers. Размер главного окна при создании - яркий пример. Тоже про Frustum. Пока пусть параметры инициализации главного окна будут заданы в конструкторе Engine.

#### Graphics
GLUquadric* quad = gluNewQuadric() - используются для отрисовки collision sphere, сейчас создаются в каждом цикле отрисовки, но можно оптимизировать и вытащить создание quad в RAII.
GraphicsSubsystemImpl::tick() : glClearColor(0.1f, 0.1f, 0.1f, 1.0f)
GraphicsSubsystemImpl::drawScene() : GraphicsSubsystemImpl::drawScene()

#### Mouse
Протянул мышь в InputProcessingSubsystem так: MainWindow -> Scene <- InputProcessingSubsystem. Когда backends сделаю, такую связку нужно будет пересмотреть.

#### Events
Временное решение - поместить определение всех событий в Scene/Events/All.h.
Нужна фильтрация. Сейчас все получают всё.

#### Test
GTest.

#### Task tracking

#### C++ improvement
foo(const shared_ptr<T>&) vs bar(shared_ptr), RVO
noexcept

#### OpenGL
В Camera не хватает мировой матрицы, и с матрицей обзора это не одно и тоже. Сказалось незнанеи OpenGL.
